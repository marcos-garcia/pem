<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


    <title>Process Event Manager by marcos-garcia</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Process Event Manager</h1>
        <h2>Java library for system launch tracking. It allows you to create events, triggered by regex matches on the stdout of the process and notify process's observers about it.</h2>
        <a href="https://github.com/marcos-garcia/pem" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description.</h3>

<p>When a developer wants to execute in Java a process already developed with a technology, and you use the exec() function. If this process is too long, you might want to monitor somehow the status of this execution, in order to do other stuff when some parts of the execution have been reached, and this "events" can be identified by the process's stdout.</p>

<p>This library has simplified this issue, encapsulating exec() calls into an Observable Process class. This Observable process has an associated Status of a specific type (Initial, Intermediate or Final) which defines the process actual status. The Observable process also has a list of Events, each one with a regex expression associated, which are triggered when their regex matches a line read at the process's output.</p> 

<img src="images/diagram.svg" align="center"/>

<p>When an event has been triggered, it changes the process's status to a new one and tells the process to notify their observers about the status modification.</p>

<img src="images/diagram2.svg" align="center"/>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>The Process Event Manager library is allocated in the Maven Central Repository, and can be added to your proyect by copying this piece of code into your "dependencies" clause at your pom.xml file:</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.marcosgarciacasado&lt;/groupId&gt;
    &lt;artifactId&gt;pem&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>You can visit the Java API <a href="API/index.html">here</a></p>

<h3>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h3>

<p>This is an example of usage of the library, with a ping call. It can be found in the test suite of the proyect at <a href="https://github.com/marcos-garcia/pem">GitHub</a></p>

<pre><code>
/**
 * Basic unit test for ObservableProcess.
 */
public class ObservableProcessTest extends TestCase implements Observer{
  
  /**
   * List of observations made.
   * 
   */ 
  private ArrayList&lt;String&gt; observations;
  
  /**
   * Create the test case
   * 
   * @param testName
   *            name of the test case
   */
  public ObservableProcessTest(String testName) {
    super(testName);
  }

  /**
   * @return the suite of tests being tested
   */
  public static Test suite() {
    return new TestSuite(ObservableProcessTest.class);
  }

  /**
   * This test executes a ping command to www.bayesforecast.com. It changes status 
   * when starts each state of the process: 
   * The ping test, the statistics report and the time report
   */
  public void testObservableProcess() {
    String command = "ping www.github.com";

    this.observations = new ArrayList&lt;String&gt;();
    
    System.out.println("Creating status...");
    ProcessStatus ps1 = new IntermediateStatus();
    ProcessStatus ps2 = new IntermediateStatus();
    ProcessStatus ps3 = new IntermediateStatus();

    System.out.println("Creating events...");
    ProcessEvent pe1 = new ProcessEvent("Haciendo.*", ps1);
    ProcessEvent pe2 = new ProcessEvent("Estad.*", ps2);
    ProcessEvent pe3 = new ProcessEvent("Tiempos.*", ps3);
    pe1.addObserver(this);
    pe2.addObserver(this);
    pe3.addObserver(this);

    System.out.println("Creating process...");
    ObservableProcess op = new ObservableProcess(command);

    System.out.println("Suscribing events...");
    op.addEvent(pe1);
    op.addEvent(pe2);
    op.addEvent(pe3);

    System.out.println("Asserting initial status...");
    assertEquals(InitialStatus.class, op.getActualStatus().getClass());

    System.out.println("Asserting initial status...");

    System.out.println("Launching process...");
    op.runProcess();

    System.out.println("Asserting final status...");
    assertEquals(FinalStatus.class, op.getActualStatus().getClass());

    System.out.println("Asserting observed status..."+observations.size());
    assertEquals(observations.size(), 3);
  }

  /**
   * When the test receives a notification from one of the Observable classes, this code
   * is being executed. It adds a new observation to the observations' list, with the activated regexp.
   * 
   */
  public void update(Observable arg0, Object arg1) {
    // TODO Auto-generated method stub
    observations.add(((ProcessEvent)arg0).getRegexp());
  }
}
</code></pre>

<h3>
<a id="javaapi" class="anchor" href="#javaapi" aria-hidden="true"><span class="octicon octicon-link"></span></a>Java API</h3>

<p>A Javadoc API is also available <a href="API/index.html">here</a></p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

This library has been developed by: Marcos Garc√≠a Casado

<p>Personal web: <a href="http://marcosgarciacasado.com">http://marcosgarciacasado.com</a></p>

<p><a href="http://es.linkedin.com/in/marcosgarciacasado">LinkedIn</a></p>

<p>Email: <a href="mailto:marcosgarciacasado@gmail.com">marcosgarciacasado@gmail.com</a></p>

        </section>

        <aside id="sidebar">
          <a href="https://github.com/marcos-garcia/pem/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/marcos-garcia/pem/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/marcos-garcia/pem"></a> is maintained by <a href="https://github.com/marcos-garcia">marcos-garcia</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-54491895-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
